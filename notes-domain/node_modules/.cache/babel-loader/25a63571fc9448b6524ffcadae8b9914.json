{"ast":null,"code":"'use strict';\n\nvar sequences = {};\nvar DEFAULTS = {\n  timestamp: function () {\n    return Date.now();\n  },\n  datetime: function () {\n    return new Date().toISOString();\n  },\n  date: function () {\n    return new Date().toISOString().slice(0, 10);\n  },\n  time: function () {\n    return new Date().toISOString().slice(11);\n  },\n  random: function () {\n    return Math.random();\n  },\n  randomint: function (args) {\n    var limit = args && args.max || 2;\n    return function () {\n      return Math.floor(Math.random() * limit);\n    };\n  },\n  seq: function (args) {\n    var name = args && args.name || '';\n    sequences[name] = sequences[name] || 0;\n    return function () {\n      return sequences[name]++;\n    };\n  }\n};\n\nmodule.exports = function defFunc(ajv) {\n  defFunc.definition = {\n    compile: function (schema, parentSchema, it) {\n      var funcs = {};\n\n      for (var key in schema) {\n        var d = schema[key];\n        var func = getDefault(typeof d == 'string' ? d : d.func);\n        funcs[key] = func.length ? func(d.args) : func;\n      }\n\n      return it.opts.useDefaults && !it.compositeRule ? assignDefaults : noop;\n\n      function assignDefaults(data) {\n        for (var prop in schema) {\n          if (data[prop] === undefined || it.opts.useDefaults == 'empty' && (data[prop] === null || data[prop] === '')) data[prop] = funcs[prop]();\n        }\n\n        return true;\n      }\n\n      function noop() {\n        return true;\n      }\n    },\n    DEFAULTS: DEFAULTS,\n    metaSchema: {\n      type: 'object',\n      additionalProperties: {\n        type: ['string', 'object'],\n        additionalProperties: false,\n        required: ['func', 'args'],\n        properties: {\n          func: {\n            type: 'string'\n          },\n          args: {\n            type: 'object'\n          }\n        }\n      }\n    }\n  };\n  ajv.addKeyword('dynamicDefaults', defFunc.definition);\n  return ajv;\n\n  function getDefault(d) {\n    var def = DEFAULTS[d];\n    if (def) return def;\n    throw new Error('invalid \"dynamicDefaults\" keyword property value: ' + d);\n  }\n};","map":{"version":3,"sources":["E:/agiliway_projects/agiliway_projects/notes-domain/node_modules/ajv-keywords/keywords/dynamicDefaults.js"],"names":["sequences","DEFAULTS","timestamp","Date","now","datetime","toISOString","date","slice","time","random","Math","randomint","args","limit","max","floor","seq","name","module","exports","defFunc","ajv","definition","compile","schema","parentSchema","it","funcs","key","d","func","getDefault","length","opts","useDefaults","compositeRule","assignDefaults","noop","data","prop","undefined","metaSchema","type","additionalProperties","required","properties","addKeyword","def","Error"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\nvar sequences = {};\r\n\r\nvar DEFAULTS = {\r\n  timestamp: function() { return Date.now(); },\r\n  datetime: function() { return (new Date).toISOString(); },\r\n  date: function() { return (new Date).toISOString().slice(0, 10); },\r\n  time: function() { return (new Date).toISOString().slice(11); },\r\n  random: function() { return Math.random(); },\r\n  randomint: function (args) {\r\n    var limit = args && args.max || 2;\r\n    return function() { return Math.floor(Math.random() * limit); };\r\n  },\r\n  seq: function (args) {\r\n    var name = args && args.name || '';\r\n    sequences[name] = sequences[name] || 0;\r\n    return function() { return sequences[name]++; };\r\n  }\r\n};\r\n\r\nmodule.exports = function defFunc(ajv) {\r\n  defFunc.definition = {\r\n    compile: function (schema, parentSchema, it) {\r\n      var funcs = {};\r\n\r\n      for (var key in schema) {\r\n        var d = schema[key];\r\n        var func = getDefault(typeof d == 'string' ? d : d.func);\r\n        funcs[key] = func.length ? func(d.args) : func;\r\n      }\r\n\r\n      return it.opts.useDefaults && !it.compositeRule\r\n              ? assignDefaults\r\n              : noop;\r\n\r\n      function assignDefaults(data) {\r\n        for (var prop in schema){\r\n          if (data[prop] === undefined\r\n            || (it.opts.useDefaults == 'empty'\r\n            && (data[prop] === null || data[prop] === '')))\r\n            data[prop] = funcs[prop]();\r\n        }\r\n        return true;\r\n      }\r\n\r\n      function noop() { return true; }\r\n    },\r\n    DEFAULTS: DEFAULTS,\r\n    metaSchema: {\r\n      type: 'object',\r\n      additionalProperties: {\r\n        type: ['string', 'object'],\r\n        additionalProperties: false,\r\n        required: ['func', 'args'],\r\n        properties: {\r\n          func: { type: 'string' },\r\n          args: { type: 'object' }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  ajv.addKeyword('dynamicDefaults', defFunc.definition);\r\n  return ajv;\r\n\r\n  function getDefault(d) {\r\n    var def = DEFAULTS[d];\r\n    if (def) return def;\r\n    throw new Error('invalid \"dynamicDefaults\" keyword property value: ' + d);\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"script"}